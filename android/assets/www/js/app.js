angular.module("starter",["ionic","ionic.service.core","ionic.service.analytics","starter.controllers","starter.services","controller.purchase","service.twads","service.push","ionic-timepicker","ngCordova"]).run(["$ionicPlatform","Util","$rootScope","$location","WeatherInfo",function(t,e,a,r,n){t.ready(function(){navigator.splashscreen&&navigator.splashscreen.hide(),e.isDebug()&&e.ga.debugMode(),ionic.Platform.isIOS()?(e.ga.startTrackerWithId("UA-70746703-3"),window.applewatch&&applewatch.init(function(){},function(t){},"group.net.wizardfactory.todayweather")):ionic.Platform.isAndroid()&&e.ga.startTrackerWithId("UA-70746703-2"),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0))}),a.$on("$stateChangeStart",function(t,i,o,l){if("tab.search"===i.name)a.viewColor="#ec72a8",window.StatusBar&&StatusBar.backgroundColorByHexString("#EC407A");else if("tab.forecast"===i.name){if(""===l.name){var c=localStorage.getItem("guideVersion");if(null===c||e.guideVersion>Number(c))return void r.path("/guide");if(0===n.getEnabledCityCount())return void r.path("/tab/search")}a.viewColor="#03A9F4",window.StatusBar&&StatusBar.backgroundColorByHexString("#0288D1")}else"tab.setting"===i.name?(a.viewColor="#FFA726",window.StatusBar&&StatusBar.backgroundColorByHexString("#FB8C00")):"guide"===i.name&&window.StatusBar&&StatusBar.backgroundColorByHexString("#0288D1")})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","$compileProvider","ionicTimePickerProvider",function(t,e,a,r,n){r.debugInfoEnabled(!1),r.aHrefSanitizationWhitelist(/^\s*(https?|file|ftp|mailto|chrome-extension|blob:chrome-extension):/),r.imgSrcSanitizationWhitelist(/^\s*(https?|file|ftp|mailto|chrome-extension|blob:chrome-extension):/),r.directive("ngShortChart",function(){return{restrict:"A",transclude:!0,link:function(t,e){var a,r,n,i,o,l,c,u={top:20,right:0,bottom:5,left:0,textTop:5};t.$watch(function(){return e[0].getBoundingClientRect().height},function(t){0!==t&&t!==r&&(a=e[0].getBoundingClientRect().width,r=e[0].getBoundingClientRect().height,n=d3.scale.ordinal().rangeBands([u.left,a-u.right]),i=d3.scale.linear().range([r-u.bottom,u.top]),void 0!=o?(o.selectAll("*").remove(),o.attr("height",r)):o=d3.select(e[0]).append("svg").attr("width",a).attr("height",r),l=d3.svg.line().interpolate("linear").x(function(t,e){return n.rangeBand()*e+n.rangeBand()/2}).y(r),c=d3.svg.line().interpolate("linear").x(function(t,e){return n.rangeBand()*e+n.rangeBand()/2}).y(function(t){return i(t.value.t3h)}),s())});var s=function(){var e=t.timeChart;if(void 0!=n&&void 0!=i&&void 0!=o&&void 0!=e){var a=t.currentWeather.time;n.domain(d3.range(e[0].values.length)),i.domain([d3.min(e,function(t){return d3.min(t.values,function(t){return t.value.t3h})}),d3.max(e,function(t){return d3.max(t.values,function(t){return t.value.t3h})})]).nice(),d3.svg.axis().scale(n).orient("bottom"),d3.svg.axis().scale(i).orient("left");var s=o.selectAll(".line-group").data(e);s.enter().append("g").attr("class","line-group");var d=s.selectAll(".line").data(function(t){return[t]}).attr("d",function(t){return l(t.values)});d.enter().append("path").attr("class",function(t){return"line line-"+t.name}).attr("d",function(t){return l(t.values)}),d.attr("d",function(t){return c(t.values)});var v=s.selectAll(".line-point").data(function(t){return[t]});v.enter().append("g").attr("class","line-point");var g=v.selectAll("circle").data(function(t){return t.values}).attr("cy",r-u.bottom);g.enter().append("circle").attr("class",function(t){return"circle-"+t.name}).attr("r",2).attr("cx",function(t,e){return n.rangeBand()*e+n.rangeBand()/2}).attr("cy",r-u.bottom),g.attr("cy",function(t){return i(t.value.t3h)}),g.exit().remove();var f=s.selectAll(".point").data(function(t){return[t]}).attr("cx",function(t){for(var e,r,i=0;i<t.values.length;i+=1)if("오늘"===t.values[i].value.day){e=i+Math.floor(a/3)-1,r=a%3;break}return n.rangeBand()*(e+r/3)+n.rangeBand()/2}).attr("cy",r-u.bottom);f.enter().append("circle").attr("class",function(t){return"point circle-"+t.name+"-current"}).attr("r",5).attr("cx",function(t){for(var e,r,i=0;i<t.values.length;i+=1)if("오늘"===t.values[i].value.day){e=i+Math.floor(a/3)-1,r=a%3;break}return n.rangeBand()*(e+r/3)+n.rangeBand()/2}).attr("cy",r-u.bottom),f.attr("cx",function(t){for(var e,r,i=0;i<t.values.length;i+=1)if("오늘"===t.values[i].value.day){e=i+Math.floor(a/3)-1,r=a%3;break}return n.rangeBand()*(e+r/3)+n.rangeBand()/2}).attr("cy",function(t){for(var e,r,n=0;n<t.values.length;n+=1)if("오늘"===t.values[n].value.day){e=n+Math.floor(a/3)-1,r=a%3;break}var o=t.values[e].value.t3h,l=t.values[e+1].value.t3h;return i(1===r?o+(l-o)/3:2===r?o+(l-o)/3*2:o)}),f.exit().remove();var h=s.selectAll(".line-value").data(function(t){return[t]});h.enter().append("g").attr("class","line-value");var m=h.selectAll("text").data(function(t){return t.values}).attr("y",r-u.bottom-u.textTop).text(function(t){if("today"===t.name){if(-50!==t.value.tmn)return t.value.tmn+"˚";if(-50!==t.value.tmx)return t.value.tmx+"˚"}return""});m.enter().append("text").attr("class",function(t){return"text-"+t.name}).attr("text-anchor","middle").attr("dy",u.top).attr("x",function(t,e){return n.rangeBand()*e+n.rangeBand()/2}).attr("y",r-u.bottom-u.textTop).text(function(t){if("today"===t.name){if(-50!==t.value.tmn)return t.value.tmn+"˚";if(-50!==t.value.tmx)return t.value.tmx+"˚"}return""}),m.attr("y",function(t){return i(t.value.t3h)-u.top-u.textTop}),m.exit().remove()}};t.$watch("timeWidth",function(t){void 0!=t&&t!=a&&(a=t,n=d3.scale.ordinal().rangeBands([u.left,a-u.right]),o&&(o.attr("width",a),o.selectAll("*").remove(),l=d3.svg.line().interpolate("linear").x(function(t,e){return n.rangeBand()*e+n.rangeBand()/2}).y(r),c=d3.svg.line().interpolate("linear").x(function(t,e){return n.rangeBand()*e+n.rangeBand()/2}).y(function(t){return i(t.value.t3h)}),s()))}),t.$watch("timeChart",function(t){t&&s()}),t.$watch("forecastType",function(t){t===!0&&s()})}}}),r.directive("ngMidChart",function(){return{restrict:"A",transclude:!0,link:function(t,e){var a,r,n,i,o,l={top:20,right:0,bottom:20,left:0,textTop:5};t.$watch(function(){return e[0].getBoundingClientRect().height},function(t){0!==t&&r!==t&&(a=e[0].getBoundingClientRect().width,r=e[0].getBoundingClientRect().height,n=d3.scale.ordinal().rangeBands([l.left,a-l.right]),i=d3.scale.linear().range([r-l.bottom,l.top]),void 0!=o?(o.selectAll("*").remove(),o.attr("height",r)):o=d3.select(e[0]).append("svg").attr("width",a).attr("height",r),c())});var c=function(){var e=t.dayChart;if(void 0!=n&&void 0!=i&&void 0!=o&&void 0!=e){n.domain(d3.range(e[0].values.length)),i.domain([d3.min(e[0].values,function(t){return t.tmn}),d3.max(e[0].values,function(t){return t.tmx})]).nice(),d3.svg.axis().scale(n).orient("bottom"),d3.svg.axis().scale(i).orient("left");var a=o.selectAll(".bar-group").data(e);a.enter().append("g").attr("class","bar-group");var r=a.selectAll("rect").data(function(t){return t.values});r.enter().append("rect").attr("class","rect"),r.exit().remove(),r.attr("x",function(t,e){return n.rangeBand()*e+n.rangeBand()/2-1}).attr("width",2).attr("y",function(t){return i(t.tmn)}).attr("height",0).attr("y",function(t){return i(t.tmx)}).attr("height",function(t){return i(t.tmn)-i(t.tmx)});var c=o.selectAll(".bar-max-value").data(e);c.enter().append("g").attr("class","bar-max-value");var u=c.selectAll("text").data(function(t){return t.values});u.enter().append("text").attr("class","text"),u.exit().remove(),u.attr("x",function(t,e){return n.rangeBand()*e+n.rangeBand()/2}).attr("y",function(t){return i(t.tmn)-l.top-l.textTop}).attr("dy",l.top).attr("text-anchor","middle").text(function(t){return t.tmx+"˚"}).attr("class","text-today").attr("y",function(t){return i(t.tmx)-l.top-l.textTop});var s=o.selectAll(".bar-min-value").data(e);s.enter().append("g").attr("class","bar-min-value");var d=s.selectAll("text").data(function(t){return t.values});d.enter().append("text").attr("class","text"),d.exit().remove(),d.attr("x",function(t,e){return n.rangeBand()*e+n.rangeBand()/2}).attr("y",function(t){return i(t.tmn)}).attr("dy",l.bottom).attr("text-anchor","middle").text(function(t){return t.tmn+"˚"}).attr("class","text-today").attr("y",function(t){return i(t.tmn)});{o.selectAll("circle").data(e).enter().append("circle")}o.selectAll("circle").data(e).attr("class","circle circle-today-current").attr("cx",function(t){for(var e=0;e<t.values.length;e++)if(0===t.values[e].fromToday)return n.rangeBand()*e+n.rangeBand()/2;return 0}).attr("cy",function(t){return i(t.temp)}).attr("r",0).attr("r",5)}};t.$watch("dayWidth",function(t){void 0!=t&&t!=a&&(a=t,n=d3.scale.ordinal().rangeBands([l.left,a-l.right]),o&&o.attr("width",a))}),t.$watch("dayChart",function(t){t&&c()}),t.$watch("forecastType",function(t){t===!1&&c()})}}}),t.state("guide",{url:"/guide",templateUrl:"templates/guide.html",controller:"GuideCtrl"}).state("purchase",{url:"/purchase",templateUrl:"templates/purchase.html",controller:"PurchaseCtrl"}).state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html",controller:"TabCtrl"}).state("tab.search",{url:"/search",cache:!1,views:{"tab-search":{templateUrl:"templates/tab-search.html",controller:"SearchCtrl"}}}).state("tab.forecast",{url:"/forecast?fav",cache:!1,views:{"tab-forecast":{templateUrl:"templates/tab-forecast.html",controller:"ForecastCtrl"}}}).state("tab.setting",{url:"/setting",cache:!1,views:{"tab-setting":{templateUrl:"templates/tab-setting.html",controller:"SettingCtrl"}}}),e.otherwise("tab/forecast"),a.tabs.style("standard"),a.tabs.position("bottom"),a.views.transition("android"),a.platform.android.scrolling.jsScrolling(!1);var i={format:12,step:5,setLabel:"설정",cancelLabel:"삭제",closeLabel:"닫기",buttons:3};n.configTimePicker(i)}]).constant("$ionicLoadingConfig",{template:'<ion-spinner icon="bubbles" class="spinner-stable"></ion-spinner>'});